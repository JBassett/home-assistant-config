- id: a212fb84-d631-4227-a434-54df8801b915
  alias: Maintenance - HA Update Notification
  trigger:
    - platform: state
      entity_id: binary_sensor.updater
      from: 'off'
      to: 'on'
  action:
    - service: notify.mobile_app_pixel_4a
      data:
        title: 'New Home Assistant Release'
        message: "Home Assistant  {{ state_attr('binary_sensor.updater', 'newest_version') }}  is now available."
        data:
          channel: Updates

- id: 35d10f53-5a94-468c-bce2-152c2903bda3
  alias: Maintenance - HACS Update Notification
  trigger:
    - platform: state
      entity_id: sensor.hacs
  condition:
    - condition: numeric_state
      entity_id: sensor.hacs
      above: 0
  action:
    - service: notify.mobile_app_pixel_4a
      data:
        title: 'New HACS Componenet Release'
        message: >-
          Updates ready for: 
          {% for repo in states.sensor.hacs.attributes.repositories -%} 
            {{repo.display_name}}{%- if not loop.last %}, {% endif -%}
          {%- endfor %}
        data:
          channel: Updates
          tag: HACS

- id: 315d8975-7f69-4348-b191-31ec1608d3d8
  alias: Maintenance - HACS Clear Update Notification
  trigger:
    - platform: state
      entity_id: sensor.hacs
      to: "0"
  condition: []
  action:
    - service: notify.mobile_app_pixel_4a
      data:
        message: clear_notification
        data:
          tag: HACS

# TODO: Nightly Snapshots

# TODO: Pre Upgrade Snapshot
